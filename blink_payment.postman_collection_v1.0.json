{
	"info": {
		"_postman_id": "d4a85d3d-e721-447d-b925-60351d8386b5",
		"name": "Blink Payment v1.0.0",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "25355064"
	},
	"item": [
		{
			"name": "token",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"postman.setEnvironmentVariable(\"access_token\", JSON.parse(responseBody).access_token);",
							"postman.setEnvironmentVariable(\"payment_types\", JSON.parse(responseBody).payment_types);"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\r\n    \"api_key\": \"{{api_key}}\",\r\n    \"secret_key\": \"{{secret_key}}\"\r\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{url}}/token",
					"host": [
						"{{url}}"
					],
					"path": [
						"token"
					]
				}
			},
			"response": []
		},
		{
			"name": "token/refresh",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\r\n    \"access_token\": \"{{access_token}}\"\r\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{url}}/token/refresh",
					"host": [
						"{{url}}"
					],
					"path": [
						"token",
						"refresh"
					]
				}
			},
			"response": []
		},
		{
			"name": "intent",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"postman.setEnvironmentVariable(\"payment_intent\", JSON.parse(responseBody).payment_intent);",
							"postman.setEnvironmentVariable(\"intent_id\", JSON.parse(responseBody).intent_id);",
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json",
						"type": "text"
					},
					{
						"key": "Authorization",
						"value": "Bearer {{access_token}}",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\r\n    \"amount\": {{$randomInt}},\r\n    \"payment_type\": \"credit-card\",\r\n    \"currency\": \"GBP\",\r\n    \"return_url\": \"https://api-demo-php.blinkpayment.co.uk/return\",\r\n    \"notification_url\": \"https://api-demo-php.blinkpayment.co.uk/notification\"\r\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{url}}/intent",
					"host": [
						"{{url}}"
					],
					"path": [
						"intent"
					]
				}
			},
			"response": []
		},
		{
			"name": "intent/refresh",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"postman.setEnvironmentVariable(\"payment_intent\", JSON.parse(responseBody).payment_intent);"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json",
						"type": "text"
					},
					{
						"key": "Authorization",
						"value": "Bearer {{access_token}}",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\r\n    \"payment_intent\": \"{{payment_intent}}\"\r\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{url}}/intent/refresh",
					"host": [
						"{{url}}"
					],
					"path": [
						"intent",
						"refresh"
					]
				}
			},
			"response": []
		},
		{
			"name": "intent/{id}",
			"protocolProfileBehavior": {
				"disableBodyPruning": true
			},
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json",
						"type": "text"
					},
					{
						"key": "Authorization",
						"value": "Bearer {{access_token}}",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{url}}/intent/{{intent_id}}",
					"host": [
						"{{url}}"
					],
					"path": [
						"intent",
						"{{intent_id}}"
					]
				}
			},
			"response": []
		},
		{
			"name": "intent/{id}",
			"request": {
				"method": "PATCH",
				"header": [
					{
						"key": "Authorization",
						"value": "Bearer  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJtZXJjaGFudF9pZCI6NzM5LCJzZWNyZXRfa2V5IjoiNTljZjMwN2IwYjE0ZDZhOWVkMjc2ZmVlNzg5YWZmYzNmM2NkMWFmMGRkMGU3MGM3OTAxYzg3MjVkNTFiYmI1MiIsImV4cCI6MTY3NTA5OTkwNH0.VnaoJ6aAnSzAcpMMFml7vY6XTswsP2Qhmn7FztSYkpI",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{ \r\n“return_url” : “https: : //www*******”,\r\n   “user_metadata : “{‘user_email’ : ‘test******’ }\"\"\r\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{url}}/intent/{id}",
					"host": [
						"{{url}}"
					],
					"path": [
						"intent",
						"{id}"
					]
				}
			},
			"response": []
		},
		{
			"name": "element",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json",
						"type": "text"
					},
					{
						"key": "Authorization",
						"value": "Bearer {{access_token}}",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\r\n    \"payment_intent\": \"{{payment_intent}}\"\r\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{url}}/element",
					"host": [
						"{{url}}"
					],
					"path": [
						"element"
					]
				}
			},
			"response": []
		},
		{
			"name": "*Cardstream-payment form",
			"request": {
				"method": "POST",
				"header": [],
				"url": {
					"raw": "https://gateway2.blinkpayment.co.uk/paymentform",
					"protocol": "https",
					"host": [
						"gateway2",
						"blinkpayment",
						"co",
						"uk"
					],
					"path": [
						"paymentform"
					]
				}
			},
			"response": []
		},
		{
			"name": "cc/process",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json",
						"type": "text"
					},
					{
						"key": "Authorization",
						"value": "Bearer {{access_token}}",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\r\n    \"payment_intent\": \"{{payment_intent}}\",\r\n    \"paymentToken\": \"{{access_token}}\",\r\n    \"type\": 2,\r\n    \"raw_amount\": \"{{$randomInt}}\",\r\n    \"currency_code\": \"GBP\",\r\n    \"customer_email\": \"{{$randomEmail}}\",\r\n    \"customer_name\": \"{{$randomFullName}}\",\r\n    \"transaction_unique\": \"test\",\r\n    \"device_timezone\": \"-330\",\r\n    \"device_capabilities\": \"javascript\",\r\n    \"device_accept_language\": \"en-GB\",\r\n    \"device_screen_resolution\": \"1366x768x24\"\r\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{url}}/cc/process",
					"host": [
						"{{url}}"
					],
					"path": [
						"cc",
						"process"
					]
				}
			},
			"response": []
		},
		{
			"name": "transaction/{id}",
			"protocolProfileBehavior": {
				"disableBodyPruning": true
			},
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json",
						"type": "text"
					},
					{
						"key": "Authorization",
						"value": "Bearer {{access_token}}",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{url}}/transaction/{id}",
					"host": [
						"{{url}}"
					],
					"path": [
						"transaction",
						"{id}"
					]
				}
			},
			"response": []
		},
		{
			"name": "{notification_url} - Notification Webhook",
			"protocolProfileBehavior": {
				"disableBodyPruning": true
			},
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json",
						"type": "text"
					},
					{
						"key": "Authorization",
						"value": "Bearer {{access_token}}",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "https://dev.blinkpayment.co.uk/api/v1/pay/transaction/{id}",
					"protocol": "https",
					"host": [
						"dev",
						"blinkpayment",
						"co",
						"uk"
					],
					"path": [
						"api",
						"v1",
						"pay",
						"transaction",
						"{id}"
					]
				}
			},
			"response": []
		},
		{
			"name": "dd/process",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Authorization",
						"value": "Bearer {{access_token}}",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\r\n    \"given_name\": \"{{$randomFirstName}}\",\r\n    \"family_name\": \"{{$randomLastName}}\",\r\n    \"company_name\": null,\r\n    \"email\": \"{{$randomEmail}}\",\r\n    \"country_code\": \"GB\",\r\n    \"account_holder_name\": \"{{$randomFullName}}\",\r\n    \"branch_code\": \"200000\",\r\n    \"account_number\": \"55779911\",\r\n    \"iban\": null\r\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{url}}/dd/process",
					"host": [
						"{{url}}"
					],
					"path": [
						"dd",
						"process"
					]
				}
			},
			"response": []
		},
		{
			"name": "dd/callback",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Authorization",
						"value": "Bearer {{access_token}}",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\r\n    \"payment_intent\": \"{{payment_intent}}\"\r\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{url}}/dd/callback",
					"host": [
						"{{url}}"
					],
					"path": [
						"dd",
						"callback"
					]
				}
			},
			"response": []
		}
	]
}